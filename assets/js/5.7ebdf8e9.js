(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{506:function(t,s,a){t.exports=a.p+"assets/img/project-struct.3d52a419.png"},507:function(t,s,a){t.exports=a.p+"assets/img/apollo-config.ba70e64b.png"},508:function(t,s,a){t.exports=a.p+"assets/img/eureka_start.216bd1cd.png"},509:function(t,s,a){t.exports=a.p+"assets/img/zuul-start.500d5b6a.png"},510:function(t,s,a){t.exports=a.p+"assets/img/basic_acs_start.ddd31600.png"},511:function(t,s,a){t.exports=a.p+"assets/img/test.5af185e3.png"},512:function(t,s,a){t.exports=a.p+"assets/img/sleuth1.d3625eb4.png"},513:function(t,s,a){t.exports=a.p+"assets/img/sleuth2.1e4b4d7b.png"},543:function(t,s,a){"use strict";a.r(s);var i=a(22),r=Object(i.a)({},(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("div",{staticClass:"custom-block tip"},[i("p",{staticClass:"custom-block-title"},[t._v("背景")]),t._v(" "),i("p",[t._v("终于，我们将 SpringCloud2.0 常用组件介绍完成，我们对 SpringCloud2.0 也已经有了一个初步的了解，现在我们通过一个的案例，对 SpringCloud2.0 各种组件实现一个整合，搭建一个基本可用的实例。")])]),t._v(" "),i("h2",{attrs:{id:"案例设计思路"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#案例设计思路"}},[t._v("#")]),t._v(" 案例设计思路")]),t._v(" "),i("h3",{attrs:{id:"案例简介"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#案例简介"}},[t._v("#")]),t._v(" 案例简介")]),t._v(" "),i("ul",[i("li",[t._v("开发一个学校信息管理平台的案例，主要服务划分为：注册服务、网关服务、基础服务和门禁服务。")])]),t._v(" "),i("h3",{attrs:{id:"服务划分思路"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#服务划分思路"}},[t._v("#")]),t._v(" 服务划分思路")]),t._v(" "),i("ul",[i("li",[t._v("在微服务开发过程中，我们需要将功能相近的业务划分为一个专门的服务，以提供接口给其他服务调用。所以我们将用户信息、角色信息、学生信息等共享的信息放到基础信息服务；将门禁相关的划分为门禁服务。")]),t._v(" "),i("li",[t._v("每个服务有自己独立的数据库。\n"),i("ul",[i("li",[t._v("注：服务划分最难的就是数据库边界的确定，一定要避免出现不同的服务之间出现联表查询，否则只能说明服务划分不成功。")])])])]),t._v(" "),i("h3",{attrs:{id:"各个服务功能简介"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#各个服务功能简介"}},[t._v("#")]),t._v(" 各个服务功能简介")]),t._v(" "),i("ul",[i("li",[t._v("注册服务\n"),i("ul",[i("li",[t._v("提供服务注册和服务发现功能。")])])]),t._v(" "),i("li",[t._v("网关服务\n"),i("ul",[i("li",[t._v("路由转发：我们在实际项目中可能不只基础信息服务和门禁服务，可能还有 n 多个服务，所以我们需要一个统一入口调用接口。")]),t._v(" "),i("li",[t._v("整合 Apollo 实现动态路由功能。")]),t._v(" "),i("li",[t._v("可以进行权限的统一验证。该功能一般需要整合 Redis 作为分布式 session，所以我们为了简便，不做介绍。")])])]),t._v(" "),i("li",[t._v("基础服务\n"),i("ul",[i("li",[t._v("提供学生信息接口。")])])]),t._v(" "),i("li",[t._v("门禁服务\n"),i("ul",[i("li",[t._v("通过 Feign 调用基础服务的学生信息接口。基础服务将接口提取为一个专门的服务包，方便整合 Feign。")]),t._v(" "),i("li",[t._v("提供生成门禁刷卡的接口。")]),t._v(" "),i("li",[t._v("提供查询门禁刷卡的接口。假设该接口要被许多 PC 端和 APP 端查询，QPS 比较高，我们通过整合 Hystrix 保证接口的高可用性。")])])])]),t._v(" "),i("h2",{attrs:{id:"github-项目-demo"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#github-项目-demo"}},[t._v("#")]),t._v(" GitHub 项目 demo")]),t._v(" "),i("ul",[i("li",[i("p",[i("a",{attrs:{href:"https://github.com/ChenFengHub/springcloud-demo",target:"_blank",rel:"noopener noreferrer"}},[t._v("整个 demo GitHub 地址"),i("OutboundLink")],1)])]),t._v(" "),i("li",[i("p",[t._v("项目目录结构简介")]),t._v(" "),i("p",[i("img",{attrs:{src:a(506),alt:""}})])]),t._v(" "),i("li",[i("p",[t._v("项目运行测试")]),t._v(" "),i("ul",[i("li",[t._v("Apollo 中路由信息先配置好")])]),t._v(" "),i("p",[i("img",{attrs:{src:a(507),alt:""}})]),t._v(" "),i("ul",[i("li",[i("p",[t._v("先启动注册服务")]),t._v(" "),i("p",[i("img",{attrs:{src:a(508),alt:""}})]),t._v(" "),i("ul",[i("li",[t._v("再启动网关服务")])]),t._v(" "),i("p",[i("img",{attrs:{src:a(509),alt:""}})]),t._v(" "),i("ul",[i("li",[t._v("再启动基础服务和门禁服务")])]),t._v(" "),i("p",[i("img",{attrs:{src:a(510),alt:""}})]),t._v(" "),i("ul",[i("li",[t._v("测试生成记录接口：localhost:8500/api-acs/record/generate")])]),t._v(" "),i("p",[i("img",{attrs:{src:a(511),alt:""}})]),t._v(" "),i("ul",[i("li",[t._v("在 zipkin 中查看调用链")])]),t._v(" "),i("p",[i("img",{attrs:{src:a(512),alt:""}}),t._v(" "),i("img",{attrs:{src:a(513),alt:""}})])])])]),t._v(" "),i("li",[i("p",[i("a",{attrs:{href:"https://github.com/ChenFengHub/springcloud-demo/tree/master/school-platform",target:"_blank",rel:"noopener noreferrer"}},[t._v("学校信息管理平台例子的 GitHub 地址"),i("OutboundLink")],1)])])])])}),[],!1,null,null,null);s.default=r.exports}}]);